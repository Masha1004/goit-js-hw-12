{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nexport const fetchImages = async ({ value, page }) =>\n  await axios.get('https://pixabay.com/api/', {\n    params: {\n      key: '42682169-5194f534d6ac320016f3b6be7',\n      q: value,\n      image_type: 'photo',\n      pretty: true,\n      page,\n      per_page: 15,\n    },\n  });\n","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nexport const gallery = document.querySelector('.gallery');\n\nconst getImgList = images => {\n  return images\n    .map(\n      ({\n        largeImageURL,\n        webformatURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n      }) => {\n        return `\n        <li class=\"gallery__item\">\n            <a href=\"${largeImageURL}\" class=\"gallery__link\"\n                ><img src=\"${webformatURL}\" alt=\"${tags}\" class=\"gallery__image\"\n            /></a>\n            <div class=\"gallery__description\">\n                <p class=\"gallery__text\"><strong>Likes</strong> <span>${likes}</span></p>\n                <p class=\"gallery__text\"><strong>Views</strong> <span>${views}</span></p>\n                <p class=\"gallery__text\"><strong>Comments</strong> <span>${comments}</span></p>\n                <p class=\"gallery__text\"><strong>Downloads</strong> <span>${downloads}</span></p>\n            </div>\n        </li>\n      `;\n      }\n    )\n    .join('');\n};\n\nexport const renderImages = imgList => {\n  gallery.insertAdjacentHTML('beforeend', getImgList(imgList));\n};\n\ngallery.addEventListener('click', e => {\n  e.preventDefault();\n  const gallerySimple = new SimpleLightbox('a', {\n    captionsData: 'alt',\n    captionDelay: 250,\n  });\n  gallerySimple.open();\n});\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nimport { fetchImages } from './js/pixabay-api';\nimport { gallery, renderImages } from './js/render-functions';\n\nconst searchForm = document.querySelector('.js-form');\nconst searchButton = document.querySelector('button[type=\"submit\"]');\nconst loadMoreButton = document.querySelector('.load-more');\nconst loader = document.querySelector('.loader');\n\nconst getErrorMessage = (message, messageColor) =>\n  iziToast.show({\n    message,\n    messageColor,\n    position: 'topCenter',\n  });\n\nconst setStylesLoader = display => (loader.style.display = display);\n\nconst setStylesButton = ({ elem, disabled = false, display }) => {\n  elem.style.display = display;\n  elem.disabled = disabled;\n};\n\nconst isShowLoadMoreButton = () => {\n  setStylesButton({ elem: loadMoreButton, display: 'none' });\n\n  getErrorMessage(\n    \"We're sorry, but you've reached the end of search results.\",\n    'green'\n  );\n};\n\nlet page = 1;\nlet value;\nconst isLoadMoreButton = loadMoreButton.style.display === 'block';\n\nconst searchImages = async ({ value, page = 1 }) => {\n  setStylesLoader('block');\n  setStylesButton({ elem: searchButton, disabled: true });\n\n  const result = await fetchImages({ value, page });\n\n  setStylesButton({ elem: searchButton });\n  setStylesLoader('none');\n\n  if (result.status === 200) {\n    const { data } = result;\n    if (data.hits.length) {\n      renderImages(data.hits);\n    } else {\n      getErrorMessage(\n        'Sorry, there are no images matching your search query. Please try again!',\n        'green'\n      );\n    }\n  } else {\n    getErrorMessage('Something went wrong. Please try again', 'red');\n  }\n\n  return result;\n};\n\nsearchForm.addEventListener('submit', async evt => {\n  evt.preventDefault();\n  value = evt.currentTarget.elements['js-input'].value;\n\n  if (value) {\n    gallery.innerHTML = '';\n\n    if (isLoadMoreButton) {\n      setStylesButton({ elem: loadMoreButton, display: 'none' });\n    }\n\n    const result = await searchImages({ value });\n\n    if (result.data.hits.length < 15) {\n      isShowLoadMoreButton();\n    } else {\n      setStylesButton({ elem: loadMoreButton, display: 'block' });\n    }\n  }\n\n  searchForm.reset();\n});\n\nloadMoreButton.addEventListener('click', async () => {\n  page++;\n  const result = await searchImages({ value, page });\n\n  if (result.data.hits.length < 15) {\n    isShowLoadMoreButton();\n  }\n});\n"],"names":["fetchImages","value","page","axios","gallery","getImgList","images","largeImageURL","webformatURL","tags","likes","views","comments","downloads","renderImages","imgList","SimpleLightbox","searchForm","searchButton","loadMoreButton","loader","getErrorMessage","message","messageColor","iziToast","setStylesLoader","display","setStylesButton","elem","disabled","isShowLoadMoreButton","isLoadMoreButton","searchImages","result","data","evt"],"mappings":"owBAEO,MAAMA,EAAc,MAAO,CAAE,MAAAC,EAAO,KAAAC,CAAM,IAC/C,MAAMC,EAAM,IAAI,2BAA4B,CAC1C,OAAQ,CACN,IAAK,qCACL,EAAGF,EACH,WAAY,QACZ,OAAQ,GACR,KAAAC,EACA,SAAU,EACX,CACL,CAAG,ECTUE,EAAU,SAAS,cAAc,UAAU,EAElDC,EAAaC,GACVA,EACJ,IACC,CAAC,CACC,cAAAC,EACA,aAAAC,EACA,KAAAC,EACA,MAAAC,EACA,MAAAC,EACA,SAAAC,EACA,UAAAC,CACR,IACe;AAAA;AAAA,uBAEQN,CAAa;AAAA,6BACPC,CAAY,UAAUC,CAAI;AAAA;AAAA;AAAA,wEAGiBC,CAAK;AAAA,wEACLC,CAAK;AAAA,2EACFC,CAAQ;AAAA,4EACPC,CAAS;AAAA;AAAA;AAAA,OAKhF,EACA,KAAK,EAAE,EAGCC,EAAeC,GAAW,CACrCX,EAAQ,mBAAmB,YAAaC,EAAWU,CAAO,CAAC,CAC7D,EAEAX,EAAQ,iBAAiB,QAAS,GAAK,CACrC,EAAE,eAAc,EACM,IAAIY,EAAe,IAAK,CAC5C,aAAc,MACd,aAAc,GAClB,CAAG,EACa,KAAI,CACpB,CAAC,ECxCD,MAAMC,EAAa,SAAS,cAAc,UAAU,EAC9CC,EAAe,SAAS,cAAc,uBAAuB,EAC7DC,EAAiB,SAAS,cAAc,YAAY,EACpDC,EAAS,SAAS,cAAc,SAAS,EAEzCC,EAAkB,CAACC,EAASC,IAChCC,EAAS,KAAK,CACZ,QAAAF,EACA,aAAAC,EACA,SAAU,WACd,CAAG,EAEGE,EAAkBC,GAAYN,EAAO,MAAM,QAAUM,EAErDC,EAAkB,CAAC,CAAE,KAAAC,EAAM,SAAAC,EAAW,GAAO,QAAAH,CAAO,IAAO,CAC/DE,EAAK,MAAM,QAAUF,EACrBE,EAAK,SAAWC,CAClB,EAEMC,EAAuB,IAAM,CACjCH,EAAgB,CAAE,KAAMR,EAAgB,QAAS,MAAQ,CAAA,EAEzDE,EACE,6DACA,OACJ,CACA,EAEA,IAAInB,EAAO,EACPD,EACJ,MAAM8B,EAAmBZ,EAAe,MAAM,UAAY,QAEpDa,EAAe,MAAO,CAAE,MAAA/B,EAAO,KAAAC,EAAO,CAAC,IAAO,CAClDuB,EAAgB,OAAO,EACvBE,EAAgB,CAAE,KAAMT,EAAc,SAAU,EAAM,CAAA,EAEtD,MAAMe,EAAS,MAAMjC,EAAY,CAAE,MAAAC,EAAO,KAAAC,CAAM,CAAA,EAKhD,GAHAyB,EAAgB,CAAE,KAAMT,CAAY,CAAE,EACtCO,EAAgB,MAAM,EAElBQ,EAAO,SAAW,IAAK,CACzB,KAAM,CAAE,KAAAC,CAAM,EAAGD,EACbC,EAAK,KAAK,OACZpB,EAAaoB,EAAK,IAAI,EAEtBb,EACE,2EACA,OACR,CAEA,MACIA,EAAgB,yCAA0C,KAAK,EAGjE,OAAOY,CACT,EAEAhB,EAAW,iBAAiB,SAAU,MAAMkB,GAAO,CACjDA,EAAI,eAAc,EAClBlC,EAAQkC,EAAI,cAAc,SAAS,UAAU,EAAE,MAE3ClC,IACFG,EAAQ,UAAY,GAEhB2B,GACFJ,EAAgB,CAAE,KAAMR,EAAgB,QAAS,MAAQ,CAAA,GAG5C,MAAMa,EAAa,CAAE,MAAA/B,CAAO,CAAA,GAEhC,KAAK,KAAK,OAAS,GAC5B6B,IAEAH,EAAgB,CAAE,KAAMR,EAAgB,QAAS,OAAS,CAAA,GAI9DF,EAAW,MAAK,CAClB,CAAC,EAEDE,EAAe,iBAAiB,QAAS,SAAY,CACnDjB,KACe,MAAM8B,EAAa,CAAE,MAAA/B,EAAO,KAAAC,CAAM,CAAA,GAEtC,KAAK,KAAK,OAAS,IAC5B4B,GAEJ,CAAC"}